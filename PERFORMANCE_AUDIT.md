# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞—É–¥–∏—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —è–¥—Ä–∞

**–î–∞—Ç–∞:** 2025-12-01
**–í–µ—Ä—Å–∏—è:** 1.0

## –†–µ–∑—é–º–µ

–ü—Ä–æ–≤–µ–¥–µ–Ω –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∞—Ä–±–∏—Ç—Ä–∞–∂–Ω–æ–≥–æ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞. –í—ã—è–≤–ª–µ–Ω–æ **14 —É–∑–∫–∏—Ö –º–µ—Å—Ç** —Ä–∞–∑–ª–∏—á–Ω–æ–π –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏:

- üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ: 3
- üü† –í—ã—Å–æ–∫–∏–µ: 3
- üü° –°—Ä–µ–¥–Ω–∏–µ: 5
- üü¢ –ù–∏–∑–∫–∏–µ: 3

---

## –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ (Tier 1)

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ1: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

**–û–ø–∏—Å–∞–Ω–∏–µ:** –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (Data Access Layer) –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã. –í—Å–µ —Ñ–∞–π–ª—ã –≤ `internal/repository/` —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–æ–ª—å–∫–æ –∑–∞–≥–ª—É—à–∫–∏ –±–µ–∑ SQL-–æ–ø–µ—Ä–∞—Ü–∏–π. –¢–æ—Ä–≥–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ (`Engine.pairs`).

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üî¥ –í—ã—Å–æ–∫–∞—è

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞ —Ç–µ—Ä—è–µ—Ç—Å—è –í–°–Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ: –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –∏—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ—è
- –†–∏—Å–∫ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –ø–æ—Ç–µ—Ä—å –ø—Ä–∏ –∫—Ä–∞—à–µ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–µ—à–µ–Ω–∏—è:**

| –†–µ—à–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–ª—é—Å—ã | –ú–∏–Ω—É—Å—ã |
|---------|----------|-------|--------|
| **1. –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤** | –ò–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å PostgreSQL | –ü–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ, –∞—É–¥–∏—Ç —Å–¥–µ–ª–æ–∫ | –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ |
| **2. –°–Ω–∞–ø—à–æ—Ç–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è** | –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ JSON-–¥–∞–º–ø–∞ –≤ —Ñ–∞–π–ª | –ë—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è | –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–Ω–∞–ø—à–æ—Ç–∞–º–∏ |
| **3. Write-Ahead Log (WAL)** | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º | –ì–∞—Ä–∞–Ω—Ç–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ | –£—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã |

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** üö® –°—Ä–æ—á–Ω–æ

---

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ2: –ë–ª–æ–∫–∏—Ä—É—é—â–∏–π WebSocket handler –±–µ–∑ —Ç–∞–π–º–∞—É—Ç–∞

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞—Ö –±–∏—Ä–∂ (`internal/exchange/bybit.go:518` –∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –≤ –¥—Ä—É–≥–∏—Ö) –º–µ—Ç–æ–¥ `handlePublicMessages()` –≤—ã–ø–æ–ª–Ω—è–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π blocking read –±–µ–∑ `SetReadDeadline()`. –ü—Ä–∏ –∑–∞–≤–∏—Å–∞–Ω–∏–∏ —Å–µ—Ç–∏ –≥–æ—Ä—É—Ç–∏–Ω–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞.

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üî¥ –í—ã—Å–æ–∫–∞—è

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ó–∞–≤–∏—Å–∞–Ω–∏–µ –æ–¥–Ω–æ–π –±–∏—Ä–∂–∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å–µ —Ü–µ–Ω–æ–≤—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å –Ω–µ—ë
- –ê—Ä–±–∏—Ç—Ä–∞–∂ –ø–æ —ç—Ç–æ–π –±–∏—Ä–∂–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω
- –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–µ—à–µ–Ω–∏—è:**

| –†–µ—à–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–ª—é—Å—ã | –ú–∏–Ω—É—Å—ã |
|---------|----------|-------|--------|
| **1. SetReadDeadline + reconnect** | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–∞–π–º–∞—É—Ç 30-60—Å, –ø—Ä–∏ –æ—à–∏–±–∫–µ ‚Äî –∞–≤—Ç–æ–ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ | –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å, –ø—Ä–æ—Å—Ç–æ—Ç–∞ | –ù—É–∂–µ–Ω graceful reconnect |
| **2. Context cancellation** | –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å context –≤ WS handler, –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ | –õ—É—á—à–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∏–≥–Ω–∞—Ç—É—Ä |

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** üö® –°—Ä–æ—á–Ω–æ

---

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ3: Lock contention –Ω–∞ callback –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í `internal/exchange/bybit.go:558` (–∏ –≤–æ –≤—Å–µ—Ö 6 –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞—Ö) –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—Ö–æ–¥—è—â–µ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ WebSocket –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è `callbackMu.RLock()`. –ü—Ä–∏ 1000+ —Å–æ–æ–±—â–µ–Ω–∏–π/—Å–µ–∫ —Å –∫–∞–∂–¥–æ–π –±–∏—Ä–∂–∏ —ç—Ç–æ —Å–æ–∑–¥–∞—ë—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É.

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üî¥ –í—ã—Å–æ–∫–∞—è

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- 6 –±–∏—Ä–∂ √ó 1000 msg/sec = **6000 –∑–∞—Ö–≤–∞—Ç–æ–≤ –º—å—é—Ç–µ–∫—Å–∞ –≤ —Å–µ–∫—É–Ω–¥—É**
- CPU contention —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ–º–∏–Ω–∏—Ä—É—é—â–∏–º —Ñ–∞–∫—Ç–æ—Ä–æ–º –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ü–µ–Ω –Ω–∞ 10-50Œºs

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–µ—à–µ–Ω–∏—è:**

| –†–µ—à–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–ª—é—Å—ã | –ú–∏–Ω—É—Å—ã |
|---------|----------|-------|--------|
| **1. atomic.Pointer –¥–ª—è callbacks** | –ó–∞–º–µ–Ω–∏—Ç—å RWMutex –Ω–∞ `atomic.Pointer[CallbackSet]` | Lock-free, –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å | –°–ª–æ–∂–Ω–µ–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º |
| **2. Lock-free channel** | –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–±—ã—Ç–∏—è –≤ –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª | Decoupling, –±–∞—Ç—á–∏–Ω–≥ | Overhead –Ω–∞ channel operations |
| **3. Copy-on-Write** | –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å callbacks –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏, —á–∏—Ç–∞—Ç—å –±–µ–∑ lock | –ü—Ä–æ—Å—Ç–æ–π read path | –ê–ª–ª–æ–∫–∞—Ü–∏–∏ –ø—Ä–∏ update |

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** üö® –°—Ä–æ—á–Ω–æ

---

## –í–´–°–û–ö–û–ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ (Tier 2)

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ4: –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–∞ price shards (silent drop)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í `internal/bot/engine.go:174` –±—É—Ñ–µ—Ä –∫–∞–Ω–∞–ª–∞ –∫–∞–∂–¥–æ–≥–æ —à–∞—Ä–¥–∞ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 2000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –ü—Ä–∏ >1000 –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π/—Å–µ–∫ –Ω–∞ —à–∞—Ä–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `default` case, –∫–æ—Ç–æ—Ä—ã–π **–º–æ–ª—á–∞ –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ—Ç** –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü† –°—Ä–µ–¥–Ω—è—è-–í—ã—Å–æ–∫–∞—è

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ü—Ä–æ–ø—É—Å–∫ –∞—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π (–Ω–µ –≤–∏–¥–∏–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã)
- –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è/–º–µ—Ç—Ä–∏–∫ –æ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö
- –í –ø–∏–∫–∞—Ö –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ –ø–æ—Ç–µ—Ä–∏ –º–æ–≥—É—Ç –¥–æ—Å—Ç–∏–≥–∞—Ç—å 30-50%

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–µ—à–µ–Ω–∏—è:**

| –†–µ—à–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–ª—é—Å—ã | –ú–∏–Ω—É—Å—ã |
|---------|----------|-------|--------|
| **1. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** | –£–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –±—É—Ñ–µ—Ä/workers –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ | –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å | –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ |
| **2. Backpressure** | –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏ | –ì–∞—Ä–∞–Ω—Ç–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ | –ú–æ–∂–µ—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å WS –æ–±—Ä–∞–±–æ—Ç–∫—É |
| **3. –ú–µ—Ç—Ä–∏–∫–∏ dropped events** | –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ—Ç–µ—Ä—å | –í–∏–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã | –ù–µ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É |

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** üî∂ –í–∞–∂–Ω–æ

---

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ5: –ê–ª–ª–æ–∫–∞—Ü–∏–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º broadcast –≤ WebSocket Hub

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í `internal/websocket/hub.go:98-102` –ø—Ä–∏ –∫–∞–∂–¥–æ–º broadcast —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤—ã–π slice –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤.

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü† –°—Ä–µ–¥–Ω—è—è-–í—ã—Å–æ–∫–∞—è

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ü—Ä–∏ 1000 updates/sec √ó N –∫–ª–∏–µ–Ω—Ç–æ–≤ = N√ó1000 –∞–ª–ª–æ–∫–∞—Ü–∏–π/—Å–µ–∫
- –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ GC: 5-15% CPU overhead
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –ø–∞—É–∑—ã GC (STW –¥–æ 10ms)

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–µ—à–µ–Ω–∏—è:**

| –†–µ—à–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–ª—é—Å—ã | –ú–∏–Ω—É—Å—ã |
|---------|----------|-------|--------|
| **1. Pre-allocated ring buffer** | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤ | Zero allocation | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ —á–∏—Å–ª–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ |
| **2. sync.Pool –¥–ª—è slice** | –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–∞–π—Å—ã | –°–Ω–∏–∂–µ–Ω–∏–µ –∞–ª–ª–æ–∫–∞—Ü–∏–π | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–¥ |
| **3. Atomic snapshot** | Copy-on-write –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ | –ü—Ä–æ—Å—Ç–æ–π read path | –ê–ª–ª–æ–∫–∞—Ü–∏–∏ –ø—Ä–∏ add/remove |

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** üî∂ –í–∞–∂–Ω–æ

---

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ6: HTTP response —á–∏—Ç–∞–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤ –ø–∞–º—è—Ç—å

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞—Ö –±–∏—Ä–∂ (`exchange/bybit.go:123`) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `io.ReadAll(resp.Body)` –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞. –ë–æ–ª—å—à–∏–µ orderbook'–∏ (100KB+) –≤—ã–∑—ã–≤–∞—é—Ç memory spikes.

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü† –°—Ä–µ–¥–Ω—è—è-–í—ã—Å–æ–∫–∞—è

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- Memory spikes –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö –≥–ª—É–±–æ–∫–∏—Ö —Å—Ç–∞–∫–∞–Ω–æ–≤
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ GC pressure
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è OOM –ø—Ä–∏ –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö –æ—Ç–≤–µ—Ç–∞—Ö

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–µ—à–µ–Ω–∏—è:**

| –†–µ—à–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–ª—é—Å—ã | –ú–∏–Ω—É—Å—ã |
|---------|----------|-------|--------|
| **1. MaxBytesReader** | `http.MaxBytesReader(w, r.Body, 1MB)` | –ó–∞—â–∏—Ç–∞ –æ—Ç OOM | –ú–æ–∂–µ—Ç –æ–±—Ä–µ–∑–∞—Ç—å –¥–∞–Ω–Ω—ã–µ |
| **2. Streaming JSON decode** | `json.NewDecoder(body).Decode()` | –ú–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏ | –ù–µ –¥–ª—è –≤—Å–µ—Ö API |
| **3. Buffer pool** | `sync.Pool` –¥–ª—è response buffers | –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –°–ª–æ–∂–Ω–æ—Å—Ç—å |

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** üî∂ –í–∞–∂–Ω–æ

---

## –°–†–ï–î–ù–ï–ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ (Tier 3)

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ7: Timer allocation –≤ Rate Limiter

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í `pkg/ratelimit/limiter.go:115` –º–µ—Ç–æ–¥ `Wait()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `time.After()`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π timer object –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ.

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° –°—Ä–µ–¥–Ω—è—è

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- 10 req/sec limit √ó 6 –±–∏—Ä–∂ = 60 timer allocations/sec
- Minor GC pressure
- ~1% CPU overhead

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–µ—à–µ–Ω–∏—è:**

| –†–µ—à–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–ª—é—Å—ã | –ú–∏–Ω—É—Å—ã |
|---------|----------|-------|--------|
| **1. time.Sleep()** | –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –ø—Ä—è–º–æ–π Sleep | –ù–µ—Ç –∞–ª–ª–æ–∫–∞—Ü–∏–π | –ù–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ context |
| **2. time.NewTimer + Reset** | –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å timer | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ | –°–ª–æ–∂–Ω–µ–µ –∫–æ–¥ |
| **3. Shared ticker** | –û–¥–∏–Ω ticker –Ω–∞ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã | –ú–∏–Ω–∏–º—É–º overhead | Precision loss |

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ

---

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ8: RWMutex –≤ OrderExecutor –Ω–∞ –∫–∞–∂–¥—ã–π execute

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í `internal/bot/order.go:95` –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è `mu.RLock()` –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ –æ—Ä–¥–µ—Ä–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ `exchanges` map.

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° –°—Ä–µ–¥–Ω—è—è

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ü—Ä–∏ –≤—ã—Å–æ–∫–æ–π —á–∞—Å—Ç–æ—Ç–µ —Ç–æ—Ä–≥–æ–≤–ª–∏ (10+ orders/sec) –≤–æ–∑–Ω–∏–∫–∞–µ—Ç contention
- Lock overhead ~100ns –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—é

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–µ—à–µ–Ω–∏—è:**

| –†–µ—à–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–ª—é—Å—ã | –ú–∏–Ω—É—Å—ã |
|---------|----------|-------|--------|
| **1. sync.Map** | –ó–∞–º–µ–Ω–∏—Ç—å map –Ω–∞ sync.Map | Lock-free reads | API —Å–ª–æ–∂–Ω–µ–µ |
| **2. atomic.Pointer** | Copy-on-write –¥–ª—è exchanges | –ù–µ—Ç lock –Ω–∞ —á—Ç–µ–Ω–∏–µ | –ê–ª–ª–æ–∫–∞—Ü–∏–∏ –ø—Ä–∏ update |
| **3. –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å** | –¢–µ–∫—É—â–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–µ–º–ª–µ–º–∞ | –ü—Ä–æ—Å—Ç–æ—Ç–∞ | –ù–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è |

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ

---

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ9: –ü–µ—Ä–µ—Å—á—ë—Ç best price –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í `internal/bot/spread.go:242` –º–µ—Ç–æ–¥ `recalculateBest()` –∏—Ç–µ—Ä–∏—Ä—É–µ—Ç –≤—Å–µ —Ü–µ–Ω—ã —Å–∏–º–≤–æ–ª–∞ (–¥–æ 6 –±–∏—Ä–∂) –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ü–µ–Ω–æ–≤–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏.

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° –°—Ä–µ–¥–Ω—è—è

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- 1000 updates/sec √ó 6 –∏—Ç–µ—Ä–∞—Ü–∏–π = 6000 —Å—Ä–∞–≤–Ω–µ–Ω–∏–π/sec
- O(k) –≤–º–µ—Å—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ O(1)
- ~0.5-1% CPU

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–µ—à–µ–Ω–∏—è:**

| –†–µ—à–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–ª—é—Å—ã | –ú–∏–Ω—É—Å—ã |
|---------|----------|-------|--------|
| **1. Incremental update** | –°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å —Ç–µ–∫—É—â–∏–º–∏ best | O(1) update | –°–ª–æ–∂–Ω–µ–µ –ª–æ–≥–∏–∫–∞ |
| **2. Heap/PriorityQueue** | Min/Max heap –¥–ª—è bid/ask | O(log k) | Overhead —Å—Ç—Ä—É–∫—Ç—É—Ä—ã |
| **3. –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å** | k=6 ‚Äî –ø—Ä–∏–µ–º–ª–µ–º–æ | –ü—Ä–æ—Å—Ç–æ—Ç–∞ | –ù–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ |

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ

---

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ10: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ exponential backoff –ø—Ä–∏ reconnect

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í `internal/exchange/bybit.go:537` –ø—Ä–∏ –æ—à–∏–±–∫–µ WebSocket –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `time.Sleep(time.Second)`.

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° –°—Ä–µ–¥–Ω—è—è

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ü—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö: ddos-—ç—Ñ—Ñ–µ–∫—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä –±–∏—Ä–∂–∏
- –í–æ–∑–º–æ–∂–µ–Ω –±–∞–Ω IP –∑–∞ —á–∞—Å—Ç—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ú–µ–¥–ª–µ–Ω–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö outages

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–µ—à–µ–Ω–∏—è:**

| –†–µ—à–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–ª—é—Å—ã | –ú–∏–Ω—É—Å—ã |
|---------|----------|-------|--------|
| **1. Exponential backoff** | 1s ‚Üí 2s ‚Üí 4s ‚Üí 8s ‚Üí max 60s | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ | –ú–µ–¥–ª–µ–Ω–Ω–µ–µ –ø–µ—Ä–≤—ã–π reconnect |
| **2. Jitter** | backoff + random(0-30%) | –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç thundering herd | –ß—É—Ç—å —Å–ª–æ–∂–Ω–µ–µ |

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ

---

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ11: –ú–∞–ª—ã–π –±—É—Ñ–µ—Ä WebSocket client (256 —Å–æ–æ–±—â–µ–Ω–∏–π)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í `internal/websocket/client.go:183` –±—É—Ñ–µ—Ä –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 256 —Å–æ–æ–±—â–µ–Ω–∏–π. –ü—Ä–∏ 1000+ updates/sec –±—É—Ñ–µ—Ä –ø–µ—Ä–µ–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞ ~250ms.

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° –°—Ä–µ–¥–Ω—è—è

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã —Ç–µ—Ä—è—é—Ç –¥–∞–Ω–Ω—ã–µ
- UI –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ü–µ–Ω—ã
- –ù–µ—Ç backpressure –º–µ—Ö–∞–Ω–∏–∑–º–∞

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–µ—à–µ–Ω–∏—è:**

| –†–µ—à–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–ª—é—Å—ã | –ú–∏–Ω—É—Å—ã |
|---------|----------|-------|--------|
| **1. –£–≤–µ–ª–∏—á–∏—Ç—å –±—É—Ñ–µ—Ä** | 256 ‚Üí 2048 | –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ | –ë–æ–ª—å—à–µ –ø–∞–º—è—Ç–∏ |
| **2. –ê–≥—Ä–µ–≥–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π** | –ë–∞—Ç—á–∏—Ç—å updates (–∫–∞–∂–¥—ã–µ 100ms) | –ú–µ–Ω—å—à–µ —Å–æ–æ–±—â–µ–Ω–∏–π | –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ |
| **3. Adaptive throttling** | –°–Ω–∏–∂–∞—Ç—å —á–∞—Å—Ç–æ—Ç—É –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ | –°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å | –°–ª–æ–∂–Ω–æ—Å—Ç—å |

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ

---

## –ù–ò–ó–ö–û–ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ (Tier 4)

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ12: –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª–µ–π sync.Pool –æ–±—ä–µ–∫—Ç–æ–≤

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í `internal/bot/spread.go:282-296` –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –æ–±—ä–µ–∫—Ç–∞ –≤ Pool –æ—á–∏—â–∞—é—Ç—Å—è –ø–æ–ª—è field-by-field.

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü¢ –ù–∏–∑–∫–∞—è

**–í–ª–∏—è–Ω–∏–µ:** –ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π CPU overhead, ~0.1%

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å bulk memset –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ (–ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ)

---

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ13: –ê–ª–ª–æ–∫–∞—Ü–∏—è slice –≤ broadcastPairStates

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í `internal/bot/engine.go:440` —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤—ã–π slice –ø—Ä–∏ –∫–∞–∂–¥–æ–º broadcast (—Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É).

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü¢ –ù–∏–∑–∫–∞—è

**–í–ª–∏—è–Ω–∏–µ:** ~30 –∞–ª–ª–æ–∫–∞—Ü–∏–π/min, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π GC impact

**–†–µ—à–µ–Ω–∏–µ:** sync.Pool –¥–ª—è pairData slice

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ

---

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ14: strconv.ParseFloat –≤ –≥–æ—Ä—è—á–µ–º –ø—É—Ç–∏

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í–æ –≤—Å–µ—Ö exchange –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `strconv.ParseFloat()` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—Ö–æ–¥—è—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü¢ –ù–∏–∑–∫–∞—è

**–í–ª–∏—è–Ω–∏–µ:** ~0.5% CPU, –Ω–µ–∏–∑–±–µ–∂–Ω–æ –¥–ª—è JSON –ø–∞—Ä—Å–∏–Ω–≥–∞

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–∏—Å–ª–æ–≤—ã–µ JSON —Ç–∏–ø—ã –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

---

## –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

–°–ª–µ–¥—É—é—â–∏–µ —Ä–µ—à–µ–Ω–∏—è **—É–∂–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | –≠—Ñ—Ñ–µ–∫—Ç |
|-----------|-------------|--------|
| **Engine** | Event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–Ω–µ—Ç polling) | –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —Ü–µ–Ω—ã |
| **Engine** | –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π worker pool | –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ |
| **Engine** | `sync.Map` –¥–ª—è pairsBySymbol | Lock-free —á—Ç–µ–Ω–∏–µ |
| **Engine** | Atomic counter –¥–ª—è activeArbs | –ù–µ—Ç mutex overhead |
| **PriceTracker** | –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Å–∏–º–≤–æ–ª–∞–º | –ù–µ—Ç global lock |
| **PriceTracker** | FNV hash –¥–ª—è —Ä–æ—É—Ç–∏–Ω–≥–∞ | O(1) —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ |
| **OrderExecutor** | –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤ | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ |
| **Object Pool** | sync.Pool –¥–ª—è PriceUpdate | –°–Ω–∏–∂–µ–Ω–∏–µ –∞–ª–ª–æ–∫–∞—Ü–∏–π |
| **broadcastPairStates** | RLock —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ | –ö–æ—Ä–æ—Ç–∫–∏–π critical section |

---

## –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

| # | –ü—Ä–æ–±–ª–µ–º–∞ | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|---|----------|-------------|---------|-----------|
| 1 | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ | üî¥ –í—ã—Å–æ–∫–∞—è | –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö | üö® –°—Ä–æ—á–Ω–æ |
| 2 | Blocking WebSocket –±–µ–∑ —Ç–∞–π–º–∞—É—Ç–∞ | üî¥ –í—ã—Å–æ–∫–∞—è | –ó–∞–≤–∏—Å–∞–Ω–∏–µ –±–æ—Ç–∞ | üö® –°—Ä–æ—á–Ω–æ |
| 3 | Lock contention –Ω–∞ callbacks | üî¥ –í—ã—Å–æ–∫–∞—è | 6000 locks/sec | üö® –°—Ä–æ—á–Ω–æ |
| 4 | Silent drop price updates | üü† –°—Ä-–í—ã—Å–æ–∫–∞—è | –ü—Ä–æ–ø—É—Å–∫ –∞—Ä–±–∏—Ç—Ä–∞–∂–µ–π | üî∂ –í–∞–∂–Ω–æ |
| 5 | –ê–ª–ª–æ–∫–∞—Ü–∏–∏ –≤ WS Hub | üü† –°—Ä-–í—ã—Å–æ–∫–∞—è | 5-15% GC overhead | üî∂ –í–∞–∂–Ω–æ |
| 6 | HTTP response –≤ –ø–∞–º—è—Ç—å | üü† –°—Ä-–í—ã—Å–æ–∫–∞—è | Memory spikes | üî∂ –í–∞–∂–Ω–æ |
| 7-11 | –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã | üü° –°—Ä–µ–¥–Ω—è—è | 1-3% CPU | üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ |
| 12-14 | –ù–∏–∑–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã | üü¢ –ù–∏–∑–∫–∞—è | <1% CPU | –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |

---

## –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –§–∞–∑–∞ 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (1-2 –¥–Ω—è)
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—É—é –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (—Å–Ω–∞–ø—à–æ—Ç—ã + WAL)
2. –î–æ–±–∞–≤–∏—Ç—å `SetReadDeadline` + reconnect –≤ WS handlers
3. –ó–∞–º–µ–Ω–∏—Ç—å `callbackMu` –Ω–∞ `atomic.Pointer`

### –§–∞–∑–∞ 2: –í–∞–∂–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (3-5 –¥–Ω–µ–π)
4. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ dropped events + –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –±—É—Ñ–µ—Ä
5. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å WS Hub broadcast
6. –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä HTTP response

### –§–∞–∑–∞ 3: –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–ø–æ –º–µ—Ä–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
7-11. –ú–µ–ª–∫–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ

---

## –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

```go
// Engine metrics
price_updates_total         // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Ü–µ–Ω
price_updates_dropped       // –ü–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–∞)
arbitrage_checks_total      // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä–æ–∫ –∞—Ä–±–∏—Ç—Ä–∞–∂–∞
arbitrage_opportunities     // –ù–∞–π–¥–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
orders_executed_total       // –ò—Å–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞
order_execution_latency_ms  // –õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è

// Exchange metrics
ws_messages_received        // –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ WS —Å–æ–æ–±—â–µ–Ω–∏—è (per exchange)
ws_reconnects_total         // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
api_requests_total          // HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ API
api_latency_ms              // –õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å API

// WebSocket Hub metrics
ws_clients_connected        // –ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã
ws_broadcasts_total         // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ broadcasts
ws_messages_dropped         // –ü–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–º–µ–¥–ª–µ–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã)

// Memory metrics
go_memstats_alloc_bytes     // –¢–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
go_gc_duration_seconds      // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å GC –ø–∞—É–∑
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —è–¥—Ä–∞ –≤ —Ü–µ–ª–æ–º **—Ö–æ—Ä–æ—à–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞** —Å —É—á—ë—Ç–æ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (event-driven, —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ, lock-free —Å—Ç—Ä—É–∫—Ç—É—Ä—ã) —É–∂–µ –≤–Ω–µ–¥—Ä–µ–Ω—ã.

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã** —Å–≤—è–∑–∞–Ω—ã —Å:
1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (—Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö)
2. –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å—é —Å–µ—Ç–µ–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (–∑–∞–≤–∏—Å–∞–Ω–∏–µ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö)
3. Lock contention –≤ –≥–æ—Ä—è—á–µ–º –ø—É—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ü–µ–Ω

–ü–æ—Å–ª–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –ø—Ä–æ–±–ª–µ–º —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞ –∫ production-—ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ —Å –æ–∂–∏–¥–∞–µ–º–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é:
- –û–±—Ä–∞–±–æ—Ç–∫–∞ 10,000+ —Ü–µ–Ω–æ–≤—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π/—Å–µ–∫
- –õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è: <1ms
- –õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–æ–≤: <100ms (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –±–∏—Ä–∂)
